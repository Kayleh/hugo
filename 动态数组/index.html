<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://kayleh.top/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://kayleh.top/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://kayleh.top/css/github.min.css' />
    <link rel="stylesheet" href='https://kayleh.top/css/github-style.css' />
    <link rel="stylesheet" href='https://kayleh.top/css/light.css' />
    <link rel="stylesheet" href='https://kayleh.top/css/dark.css' />
    <link rel="stylesheet" href='https://kayleh.top/css/syntax.css' />
    <title>dynamic-array - Kayleh</title>
    
    <link rel="icon" type="image/x-icon" href='https://kayleh.top/images/favicon.ico'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="动态数组
" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://kayleh.top/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="dynamic-array - Kayleh" />
<meta name="twitter:description"
  content="动态数组
" />
<meta name="twitter:site" content="https://kayleh.top" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://kayleh.top">


<meta property="og:type" content="article" />
<meta property="og:title" content="dynamic-array - Kayleh">
<meta property="og:description"
  content="动态数组
" />
<meta property="og:url" content="https://kayleh.top/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/" />
<meta property="og:site_name" content="dynamic-array" />
<meta property="og:image"
  content="https://kayleh.top">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2020-04-26 09:02:37 &#43;0800 CST" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://kayleh.top">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://kayleh.top">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://kayleh.top">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://kayleh.top">
                  <img class=" avatar-user"
                    src="http://cdn.jsdelivr.net/gh/kayleh/cdn/img/2.jpg"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://kayleh.top">Kayleh</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://kayleh.top/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/">dynamic-array</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Sun, 26 Apr 2020 09:02:37 &#43;0800"
                    class="no-wrap">
                    Sun, 26 Apr 2020 09:02:37 &#43;0800</relative-time>

                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div class="file-header d-flex flex-md-items-center flex-items-start">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    3842 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/algorithm">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      algorithm
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5">
                <article class="markdown-body entry-content container-lg"><p>动态数组</p>
<h4 id="数组是一种顺序储存的线性表所有元素的内存地址是连续">数组是一种顺序储存的线性表,所有元素的内存地址是连续.</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>20<span style="color:#f92672">,</span> 30<span style="color:#f92672">,</span> 40<span style="color:#f92672">}</span>
<span style="color:#75715e">//向内存申请了12个字节地址
</span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200328103402109.png" alt="在这里插入图片描述"></p>
<ul>
<li>
<p>在很多编程语言中，数组有个致命的缺点， <strong>无法动态修改容量</strong>。</p>
</li>
<li>
<p>实际开发中我们希望数组的容量是动态变化的。</p>
</li>
</ul>
<h1 id="动态数组">动态数组</h1>
<p>创建ArrayList类,创建size属性来管理数组中元素的个数,创建element属性来管理存取的数据.</p>
<p>可以对动态数组进行增删改查操作.</p>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/0200328103943700.png" alt=""></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayList</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> E<span style="color:#f92672">[]</span> elements<span style="color:#f92672">;</span>

	<span style="color:#75715e">// 元素的数量
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">size</span><span style="color:#f92672">();</span> 
	<span style="color:#75715e">// 是否为空
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">();</span>
	<span style="color:#75715e">// 是否包含某个元素
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>E element<span style="color:#f92672">);</span> 
	<span style="color:#75715e">// 添加元素到最后面
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>E element<span style="color:#f92672">);</span> 
	<span style="color:#75715e">// 返回index位置对应的元素
</span><span style="color:#75715e"></span>	E <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">);</span> 
	<span style="color:#75715e">// 设置index位置的元素
</span><span style="color:#75715e"></span>	E <span style="color:#a6e22e">set</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> E element<span style="color:#f92672">);</span> 
	<span style="color:#75715e">// 往index位置添加元素
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> E element<span style="color:#f92672">);</span> 
	<span style="color:#75715e">// 删除index位置对应的元素 
</span><span style="color:#75715e"></span>	E <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">);</span> 
	<span style="color:#75715e">// 查看元素的位置
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">indexOf</span><span style="color:#f92672">(</span>E element<span style="color:#f92672">);</span> 
	<span style="color:#75715e">// 清除所有元素
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">clear</span><span style="color:#f92672">();</span> 
<span style="color:#f92672">}</span>

</code></pre></div><h3 id="动态数组的实现">动态数组的实现</h3>
<h4 id="构造方法">构造方法</h4>
<p>如果构建的数组空间小于默认空间,则会以默认空间创建数组.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArrayList</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 元素的数量
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 所有元素
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> E<span style="color:#f92672">[]</span> elements<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * 数组的默认容量
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> DEFAULT_CAPACITY <span style="color:#f92672">=</span> 10<span style="color:#f92672">;</span>

	<span style="color:#75715e">/**
</span><span style="color:#75715e">     * 找不到元素返回-1
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> ELEMENT_NOT_FOUNT <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayList</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 默认容量
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//elements = new int[DEFAULT_CAPACITY];
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>DEFAULT_CAPACITY<span style="color:#f92672">);</span> <span style="color:#75715e">// 调用下面的构造器
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ArrayList</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 设置默认容量为 10
</span><span style="color:#75715e"></span>        capacity <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>capacity <span style="color:#f92672">&lt;</span> DEFAULT_CAPACITY<span style="color:#f92672">)</span> <span style="color:#f92672">?</span> DEFAULT_CAPACITY <span style="color:#f92672">:</span> capacity<span style="color:#f92672">;</span>

        <span style="color:#75715e">// 因为泛型(所以传一个Object数组,然后通过强转)
</span><span style="color:#75715e"></span>        elements <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

</code></pre></div><h4 id="添加元素">添加元素</h4>
<ul>
<li>数组添加元素分为<code>在最后一个元素的后面添加新元素</code>和<code>将元素插入到某个位置（非最后面）</code>两种情况。</li>
<li>第一种情况，这个<code>新元素需要添加到的索引</code>等于<code>当前数组元素的个数</code>，在ArrayList中<code>size</code>属性就是<code>当前数组元素的个数</code>，所以就是将新元素添加到数组的<code>size</code>位置上，然后<code>size加1</code>。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200328104623565.png" alt=""></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> E element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    elements<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> element<span style="color:#f92672">;</span>
    size<span style="color:#f92672">++;</span>
<span style="color:#f92672">}</span>
</code></pre></div><ul>
<li>如果是第二种情况，只需要将插入位置后面的元素向后移动即可。</li>
<li>注意：需要从后向前移动元素，如果从前向后移动元素，那么会进行元素覆盖, 最后出错。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200328105012778.png" alt=""></p>
<h4 id="数组越界">数组越界</h4>
<p>添加元素,还要注意传入的索引不能越界,即不能小于0,也不能大于size.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 根据index插入元素时,判断index是否有效
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param index
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">rangeCheckForAdd</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">&lt;</span> 0 <span style="color:#f92672">||</span> index <span style="color:#f92672">&gt;</span> size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        indexOutOfBounds<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 封装数组越界异常
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param index
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">indexOutOfBounds</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IndexOutOfBoundsException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Index:&#34;</span> <span style="color:#f92672">+</span> index <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, Size:&#34;</span> <span style="color:#f92672">+</span> size<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

</code></pre></div><h4 id="数组扩容">数组扩容</h4>
<p>动态扩容思路:</p>
<ul>
<li>
<p>通过默认容量创建的数组,是在堆空间中随机生成的地址;如此一来再申请空间拼接到该数组后,这种方式不可能实现;</p>
</li>
<li>
<p>我们只能再创建一个大容量的数组,然后将之前数组中的元素移动到这个数组中;然后将引用指向新数组即可!</p>
</li>
<li>
<p>由于数组elements最大的容量只有10，所以当数组存满元素时，就需要对数组进行扩容。</p>
</li>
<li>
<p>因为数组是无法动态扩容的，所以需要创建一个新的数组，这个数组的容量要比之前数组的容量大。</p>
</li>
<li>
<p>然后在将原数组中的元素存放到新数组中，这样就实现了数组的扩容。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/2020032810554134.png" alt=""></p>
<ul>
<li>该方法确保默认容量为多少,为了验证<code>是否超过给定的默认容量</code>,然后进行判断是否要扩容;这里<code>size+1</code>为数组当前数量+1, 因为每次<code>add</code>都会增加一个容量。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 确保至少要有capacity个容量
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param capacity
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ensureCapacity</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">// 获取数组当前容量
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> oldCapacity <span style="color:#f92672">=</span> elements<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#75715e">// 判断是否要扩容
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>oldCapacity <span style="color:#f92672">&gt;=</span> capacity<span style="color:#f92672">)</span>
        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span> <span style="color:#75715e">// 此时不扩容
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 这种方式是扩容1.5倍
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> newCapacity <span style="color:#f92672">=</span> oldCapacity <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>oldCapacity <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">);</span>

    E<span style="color:#f92672">[]</span> newElements <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>newCapacity<span style="color:#f92672">];</span>
    <span style="color:#75715e">// 将原来数组中的元素移动到新数组中
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        newElements<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> elements<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 将数组引用指向新数组
</span><span style="color:#75715e"></span>    elements <span style="color:#f92672">=</span> newElements<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

</code></pre></div><p>实现add函数，需要在添加新元素之前，判断数组越界和扩容。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 在index位置插入一个元素
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param index
</span><span style="color:#75715e"> * @param element
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> E element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 在添加元素的时候,判断index是否有效
</span><span style="color:#75715e"></span>    rangeCheckForAdd<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>

    ensureCapacity<span style="color:#f92672">(</span>size <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>

    <span style="color:#75715e">// 注意: 插入元素后,元素是从后开始往后挪
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> index<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
        elements<span style="color:#f92672">[</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> elements<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    elements<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> element<span style="color:#f92672">;</span>
    size<span style="color:#f92672">++;</span>
<span style="color:#f92672">}</span>

</code></pre></div><p>最终在最后一个元素的后面添加新元素，即添加元素到尾部的实现方式如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 添加元素到尾部
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param element
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>E element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// elements[size++] = element;
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 传入数组数量(相当于在最后插入元素)
</span><span style="color:#75715e"></span>    add<span style="color:#f92672">(</span>size<span style="color:#f92672">,</span> element<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="删除元素">删除元素</h4>
<ul>
<li>删除元素，实际上就是<code>移除指定位置的元素</code>，并将<code>后面的元素向前移动</code>。</li>
<li>如下图，当删除索引为<code>3</code>的元素时，只需要将后面的元素向前移动，然后在去掉最后一个元素，<code>size减1</code>即可。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200328110106999.png" alt=""></p>
<h4 id="数组越界-1">数组越界</h4>
<ul>
<li>删除元素时传入的索引不能越界, 即不能小于0, 也不能大于等于size所以我们在删除元素之前需要先进行索引检查。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">indexOutOfBounds</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IndexOutOfBoundsException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Index:&#34;</span> <span style="color:#f92672">+</span> index <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, Size:&#34;</span> <span style="color:#f92672">+</span> size<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
	
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">rangeCheck</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>index <span style="color:#f92672">&lt;</span> 0 <span style="color:#f92672">||</span> index <span style="color:#f92672">&gt;=</span> size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        outOfBounds<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="数组缩容">数组缩容</h4>
<ul>
<li>
<p>当数组中的元素删除后，数组剩余的空间可能会很大，这样就会造成内存的浪费。</p>
</li>
<li>
<p>所以当数组中元素删除后，我们需要对数组进行<code>缩容</code>。</p>
</li>
<li>
<p>实现方法类似于扩容，当数组中容量小于某个值时，创建新的数组，然后将原有数组中的元素存入新数组即可。</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 数组缩容
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">trim</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 获取当前数组的容量
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> capacity <span style="color:#f92672">=</span> elements<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#75715e">// 当size大于等于容量的一半, 或则容量已经小于默认容量(10)时, 直接返回
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">&gt;=</span> capacity <span style="color:#f92672">&gt;&gt;</span> 1 <span style="color:#f92672">||</span> capacity <span style="color:#f92672">&lt;</span> CAPACITY_DEFAULT<span style="color:#f92672">)</span> <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
    <span style="color:#75715e">// 计算新的容量 = 原有容量的一半
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> newCapacity <span style="color:#f92672">=</span> capacity <span style="color:#f92672">&gt;&gt;</span> 1<span style="color:#f92672">;</span>
    <span style="color:#75715e">// 创建新数组
</span><span style="color:#75715e"></span>    E<span style="color:#f92672">[]</span> newElements <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>newCapacity<span style="color:#f92672">];</span>
    <span style="color:#75715e">// 将原数组元素存入新数组
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
    	newElements<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> elements<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// 引用新数组
</span><span style="color:#75715e"></span>    elements <span style="color:#f92672">=</span> newElements<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>最终, remove方法实现如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 删除index位置的元素
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param index
</span><span style="color:#75715e"> * @return 被删除的元素
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    rangeCheck<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
    E delEle <span style="color:#f92672">=</span> elements<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>

    <span style="color:#75715e">// 当删除一个元素时,需要挪动后面元素的范围
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> index <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;=</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        elements<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> elements<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>
    size<span style="color:#f92672">--;</span>
    <span style="color:#75715e">// 同clear的细节,当从后往前以后时,最后一个的地址需要释放
</span><span style="color:#75715e"></span>    elements<span style="color:#f92672">[</span>size<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#75715e">// 判断数组是否需要缩容
</span><span style="color:#75715e"></span>    trim<span style="color:#f92672">();</span>
    <span style="color:#66d9ef">return</span> delEle<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * 删除传入的元素
</span><span style="color:#75715e"> * @param element
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span>E element<span style="color:#f92672">){</span>
    remove<span style="color:#f92672">(</span>indexOf<span style="color:#f92672">(</span>element<span style="color:#f92672">));</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="清空数组">清空数组</h4>
<p>清空数组时，需要将所有的元素置为null，只有这样才能真正的释放对象，然后size置为0。</p>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200328110807352.png" alt=""></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 清除所有元素
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">clear</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        elements<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    size <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="修改元素">修改元素</h4>
<p>修改元素时，只需要将原有位置的元素<code>替换</code>掉即可，同样需要注意一下索引是否<code>越界</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 设置index位置的元素
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param index
</span><span style="color:#75715e"> * @param element
</span><span style="color:#75715e"> * @return 原来的元素
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">set</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> E element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    rangeCheck<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>

    E oldEle <span style="color:#f92672">=</span> elements<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
    elements<span style="color:#f92672">[</span>index<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> element<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> oldEle<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="查询元素">查询元素</h4>
<p>查询元素，只需要将指定索引的元素返回，注意索引是否越界即可。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 获取index位置的元素
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param index
</span><span style="color:#75715e"> * @return
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 约束Index
</span><span style="color:#75715e"></span>    rangeCheck<span style="color:#f92672">(</span>index<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> elements<span style="color:#f92672">[</span>index<span style="color:#f92672">];</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="查看元素位置">查看元素位置</h4>
<ul>
<li>可以通过循环, 查找元素在数组中的位置。</li>
<li>注意：假如数组中可以存储<code>null</code>，而null是不能调用<code>equals</code>方法的，所以需要对传入的元素进行判断，如果查找的元素是<code>null</code>，需要单独处理。</li>
<li>当元素存在时返回索引，否则返回变量<code>ELEMENT_ON_FOUND</code>的值。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 查看元素的索引
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param element
</span><span style="color:#75715e"> * @return
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">indexOf</span><span style="color:#f92672">(</span>E element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>element <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 循环判断如果element为null,直接返回null的索引
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>elements<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 因为element肯定不为null了,所以放在前面;避免空指针异常
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>element<span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>elements<span style="color:#f92672">[</span>i<span style="color:#f92672">]))</span>
                <span style="color:#66d9ef">return</span> i<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> ELEMENT_NOT_FOUNT<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="是否包含某元素">是否包含某元素</h4>
<p>只需通过判断索引是否等于<code>ELEMENT_ON_FOUND</code>即可。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 是否包含某个元素
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param element
</span><span style="color:#75715e"> * @return
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>E element<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 如果element元素可以找到
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> indexOf<span style="color:#f92672">(</span>element<span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> ELEMENT_NOT_FOUNT<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="元素的数量">元素的数量</h4>
<p>size的值，即为元素的数量</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 元素的数量
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @return
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> size<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

</code></pre></div><h4 id="数组是否为空">数组是否为空</h4>
<p>通过判断<code>size</code>的值是否为<code>0</code>即可</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 是否为空
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @return
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">inEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> size <span style="color:#f92672">==</span> 0<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

</code></pre></div><h4 id="动态数组打印">动态数组打印</h4>
<p>可以重写<code>toString</code>方法, 来打印<code>ArrayList</code>中的元素。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 打印格式: size=3, [10, 20, 30]
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 使用StringBuilder 效率高一些
</span><span style="color:#75715e"></span>    StringBuilder string <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuilder<span style="color:#f92672">();</span>
    string<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;size=&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>size<span style="color:#f92672">).</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;, [&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        string<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>elements<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            string<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;, &#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    string<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> string<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

</code></pre></div><p><strong>这样就实现了动态数组的基本操作。</strong></p>
<h1 id="arraylist能否进一步优化">ArrayList能否进一步优化？</h1>
<ul>
<li>在ArrayList中，如果要删除索引0位置的元素，则需要将索引0之后的元素全部往前移一位。</li>
<li>如果要在索引<code>0</code>位置添加元素，也需要将索引<code>0</code>及之后的元素全<code>部往后移一位</code>。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200328112238774.png" alt=""></p>
<ul>
<li>在ArrayList中<code>增加一个记录首元素位置的属性</code>。</li>
<li>删除索引<code>0</code>位置的元素，我们只需要将<code>first</code>属性改为<code>1</code>。</li>
<li>-在索引<code>0</code>位置添加元素，则只需要将<code>first</code>属性改为<code>0</code>。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200328112539197.png" alt=""></p>
<ul>
<li>如果继续往前插入元素，则将插入的元素存放在索引<code>8</code>这个位置，并将<code>first</code>改为<code>8</code>。</li>
<li>当要获取索引<code>8</code>下一个元素时，对索引取<code>模</code>，则拿到索引<code>0</code>位置的元素。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/D:%5CBlog%5Csource_posts%5C%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%E3%80%91%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84%5C20200328112630777.png" alt=""></p>
<ul>
<li>如果插入元素，则可选择挪动<code>前半段</code>数据或<code>后半段</code>数据。</li>
<li>在索引<code>2</code>处插入元素<code>99</code>，可以选择将元素<code>22</code>，<code>33</code>左移，然后插入<code>99</code>即可。</li>
<li><code>扩容</code>和<code>缩容</code>同样可以优化。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/kayleh/cdn/img/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/20200413231142422.png" alt=""></p>
<h1 id="重点总结">重点总结</h1>
<h4 id="动态扩容思路">动态扩容思路</h4>
<p>通过默认容量创建的数组,是在堆空间中随机生成的地址;如此一来
再申请空间拼接到该数组后,这种方式不可能实现;
我们只能再创建一个大容量的数组,然后将之前数组中的元素移动到
这个数组中;然后将引用指向新数组即可!</p>
<h4 id="如何确保容量是否越界">如何确保容量是否越界</h4>
<p>该方法确保默认容量为多少, 为了验证是否超过给定的默认容量,然后进行判断是否要扩容; 这里size+1为数组当前数量+1, 因为每次add都会增加一个容量。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  ensureCapacity<span style="color:#f92672">(</span>size <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
</code></pre></div><h4 id="增加泛型">增加泛型</h4>
<p>使用泛型, 使动态数组可以添加任何类型的数据。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  elements <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>E<span style="color:#f92672">[])</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>capacity<span style="color:#f92672">];</span>
</code></pre></div><h5 id="clear方法的过渡细节">clear方法的过渡细节</h5>
<p>因为之前存储的都是int数据, 直接设置size=0时, 开辟的存储int类型的空间就不能被访问, 当add后, 就可以访问后面的空间, 所以此时的空间可以重复利用;</p>
<p>当使用泛型后, 动态数组中存储的都是对象类型, 实际存储的都是对象的地址, 每一个对象的地址又有一块空间引用着; 此时如果仍设置 size=0, 当clear后,开辟的存储空间中的地址没有被销毁, 地址仍被对象空间引用着; 这样以来存储对象的空间就不会被释放; 但是存储地址的数组可以重复利用; 所以要将地址数组都置为null, 然后size=0, 这样以来,引用该地址的对象空间也就释放了!</p>
<h4 id="removeindexof的细节">remove、indexOf的细节</h4>
<p>remove最后一个地址也要情况, 同clear细节
在indexOf方法中,不用==比较, 因为比较的是地址值,一般重写equals方法自己定义比较内容即可;
null值处理: 当往数组传null的时候,indexOf的比较处理: 如果那null.equals来比较会出现空指针异常;</p></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://kayleh.top">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://kayleh.top/js/github-style.js"></script>



</html>